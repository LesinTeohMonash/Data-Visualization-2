{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "background": "#f4f4d5",
  "data": {
    "url": "https://raw.githubusercontent.com/LesinTeohMonash/Data-Visualization-2/main/datasets/dairy-plant-base.csv"
  },
  
  "hconcat": [
    
    {
      "layer": [
        {
          "params": [
          {
            "name": "Milk Filter",
            "select": {"type": "point", "fields": ["Type of Milk"]},
            "bind": "legend"
          }
          ],
          "mark": {"type": "arc", "innerRadius": 65},
          "encoding": {
            "theta": {
              "field": "Eutrophication from milks (g PO43-eq)",
              "type": "quantitative"
            },
            "color": {
              "field": "Type of Milk",
              "type": "nominal",
              "legend": {"titleColor": "#333d29", "labelColor": "#333d29"},
              "scale": {
                "domain": [
                  "Almond milk",
                  "Dairy milk",
                  "Oat milk",
                  "Rice milk",
                  "Soy milk"
                ],
                "range": ["#ecf07b", "#e2e859", "#d7de4b", "#cad33d", "#bdc849"]
              }
            },
            "opacity": {
              "condition": {"param": "Milk Filter", "value": 0.9},
              "value": 0.4
            },
            "tooltip": [
              {"field": "Type of Milk", "type": "nominal"},
              {
                "field": "Eutrophication from milks (g PO43-eq)",
                "type": "quantitative",
                "title": "Eutrophication (g)"
              },
              {"field": "Eutrophication %", "type": "quantitative"}
            ]
          }
        },

        {
          "data": {
            "name": "type of emission",
            "values": [
              {"type1": "Eutrophication"},
              {"type2": "Water Used"},
              {"type3": "Land Used"},
              {"type4": "GHG"}
            ]
          },

          "transform": [
            {"filter": "datum.type1 == 'Eutrophication'"}
          ],
          
          "mark": {
            "type": "text",
            "fontSize": 15,
            "font": "monospace"
          },
          "encoding": {
            "text": {"field": "type1", "type": "nominal"}
          }
        }
      ]
      
    },
    {
      "layer": [
        {
          "mark": {"type": "arc", "innerRadius": 65},
          "encoding": {
            "theta": {
              "field": "GHG emissions of milks (kg CO2eq)",
              "type": "quantitative"
            },
            "color": {"field": "Type of Milk", "type": "nominal"},
            "opacity": {
              "condition": {"param": "Milk Filter", "value": 0.9},
              "value": 0.4
            },
            "tooltip": [
              {"field": "Type of Milk", "type": "nominal"},
              {
                "field": "GHG emissions of milks (kg CO2eq)",
                "type": "quantitative",
                "title": "GHG Emissions (kg)"
              },
              {"field": "GHG %", "type": "quantitative"}
            ]
          }
        },

        {
          "data": {
            "name": "type of emission",
            "values": [
              {"type1": "Eutrophication"},
              {"type2": "Water Used"},
              {"type3": "Land Used"},
              {"type4": "GHG"}
            ]
          },

          "transform": [
            {"filter": "datum.type4 == 'GHG'"}
          ],
          
          "mark": {
            "type": "text",
            "fontSize": 15,
            "font": "monospace"
          },
          "encoding": {
            "text": {"field": "type4", "type": "nominal"}
          }
        }
      ]
      
    },
    {
      "layer": [
        {
            "mark": {"type": "arc", "innerRadius": 65},
            "encoding": {
              "theta": {"field": "Land use of milks (m2)", "type": "quantitative"},
              "color": {"field": "Type of Milk", "type": "nominal"},
              "opacity": {
                "condition": {"param": "Milk Filter", "value": 0.9},
                "value": 0.4
              },
              "tooltip": [
                {"field": "Type of Milk", "type": "nominal"},
                {
                  "field": "Land use of milks (m2)",
                  "type": "quantitative",
                  "title": "Land Used (m2)"
                },
                {"field": "Land %", "type": "quantitative"}
              ]
            }
        },

        {
          "data": {
            "name": "type of emission",
            "values": [
              {"type1": "Eutrophication"},
              {"type2": "Water Used"},
              {"type3": "Land Used"},
              {"type4": "GHG"}
            ]
          },

          "transform": [
            {"filter": "datum.type3 == 'Land Used'"}
          ],
          
          "mark": {
            "type": "text",
            "fontSize": 15,
            "font": "monospace"
          },
          "encoding": {
            "text": {"field": "type3", "type": "nominal"}
          }
        }
      ]
      
    },
    {
      "layer": [
        {
          "mark": {"type": "arc", "innerRadius": 65},
          "encoding": {
            "theta": {"field": "Water use of milks (L)", "type": "quantitative"},
            "color": {
              "field": "Type of Milk",
              "type": "nominal",
              "legend": {"labelColor": "#3a5a40", "titleColor": "#3a5a40"}
            },
            "opacity": {
              "condition": {"param": "Milk Filter", "value": 0.9},
              "value": 0.4
            },
            "tooltip": [
              {"field": "Type of Milk", "type": "nominal"},
              {
                "field": "Water use of milks (L)",
                "type": "quantitative",
                "title": "Water (L)"
              },
              {"field": "Water %", "type": "quantitative"}
            ]
          }
        },
        {
          "data": {
            "name": "type of emission",
            "values": [
              {"type1": "Eutrophication"},
              {"type2": "Water Used"},
              {"type3": "Land Used"},
              {"type4": "GHG"}
            ]
          },

          "transform": [
            {"filter": "datum.type2 == 'Water Used'"}
          ],
          
          "mark": {
            "type": "text",
            "fontSize": 15,
            "font": "monospace"
          },
          "encoding": {
            "text": {"field": "type2", "type": "nominal"}
          }
        }
      ]  
    }
  ],
  "config": {}
}